# DSP_audio_benchmark
音声ファイル取得からMFCC(メル周波数ケプストラム係数)への変換までの各言語のベンチマーク

レスポンス速度が求められるアプリを作ろうとしているので、アプリ開発で重要な速度と作りやすさを見て言語を決めたい。

## 候補
* C++
* C#
* F#
* Java
* Python
* Rust
* Swift

## それぞれの良い点と懸念点

* 観点
  * 速度
  * 作りやすさ
    * エコシステム
    * 学習コスト
    * 保守性
    
言語   | 良い点                                      | 懸念点
---    | ---                                         | ---
C++    | 最速、豊富なライブラリ                      | 一番むずい、だるい
C#     | .NET、資料多い、Xamarinの可能性             | 特になし(慣れてない、だるい、最速ではない)
F#     | 関数型、.NET、おもしろい、Xamarinの可能性   | 資料が少ない、慣れてない
Java   | 慣れてる、クロスプラットフォーム、IDE◎     | 特になし(だるい、おもしろくない、最速ではない)
Python | 慣れてる、一番簡単、資料多い                | 速度は微妙かも(NumPyでも)、 保守性が微妙
Rust   | 最速、安全、おもしろい                      | GUIが微妙、むずかしい、慣れてない
Swift  | 慣れてる、楽しい、Apple限定で作るならこれ   | Apple限定(vDSPフレームワーク)

## 考察

.NET系は使い慣れていないので少し抵抗感あり、使えるようになってしまえばエコシステムと保守性が良いのでアリ。
C++, Rustはハードルが高いけど本気でやるならベストな選択。
SwiftはApple限定でなければ本当に最高。
Pythonは一番簡単だけど遅いかも。
Javaはだるいけど割といいかもしれない、もしOSSにするなら参入しやすい。

## 決め方

取り組むべき順に並び替えた。

言語   | 決め方
---    | ---
Python | ベンチマークを取ってみて他のとそこまで差が出ないならこれにする
Rust   | 最速値取得用。やってみて行けそうと思ったらこれにする
Java   | 作りやすくて速度も良いならこれにする
Swift  | Apple限定なら最有力候補なのでやってみる。速度が出ないなら諦める。
F#     | おもしろいのでとりあえずやってみる。Xamarinにワンチャン懸けたい気持ちがある。
C#     | C#でやるならJavaでいいのではという感じはするので多分候補外。
C++    | 一番抵抗感が大きい。

## ベンチマークの取り方

バッファにとっておいた音声データからMFCCへの変換までの速度を計測する。計測するプログラムの作りやすさも感じておく。

### MFCC変換までの流れ

サンプリング周波数16kHzのwavファイルについて、二つの方法でベンチマークを取る。なお、作りやすさもみたいのでパッケージ化(ライブラリ化)を試みる。

1. ストリーミング的に、1分間のwavファイルを100ミリ秒のフレームに分けてバッファにとっておき、そこから計測スタートしてそれぞれMFCCを求める。
2. 10秒くらいのwavファイルの音声データをバッファにとっておき、そこから計測スタートしてMFCCを求める。

#### 注意点

ストリーミングの計測のバッファは二次元配列になるので、配列のコピーなどに注意する。(気にするのSwiftくらい?)

長時間音声のベンチマークは取る必要ない。
